<!doctype html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8">

    <!-- www.phpied.com/conditional-comments-block-downloads/ -->
    <!--[if IE]><![endif]-->

    <title>HTML5 Presentation</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!--  Mobile Viewport Fix -->
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">

    <!-- Place favicon.ico and apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="favicon.ico">

    <!-- CSS : implied media="all" -->
    <link rel="stylesheet" href="css/style.css?v=1">

    <!-- For the less-enabled mobile browsers like Opera Mini -->
    <link rel="stylesheet" media="handheld" href="css/handheld.css?v=1">
 
    <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
    <script src="js/modernizr-1.5.min.js"></script>
    
    <!-- Cloudmade map for demo -->
    <script type="text/javascript" src="http://tile.cloudmade.com/wml/latest/web-maps-lite.js"></script>
    
    <script type="text/javascript" src="http://use.typekit.com/lnv2abr.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

</head>

<!--[if lt IE 7 ]> <body class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <body class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <body class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <body class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <body> <!--<![endif]-->

    <div class="presentation">
        <div class="slides">
            <!-- <div class="slide current">
                <style>
                    #logowrapper {
                        left: auto;
                        right: 35px;
                    }
                    #logo {
                        font-size: 28px;                        
                    }
                    #logo a {                        
                        color: #444;
                        border-bottom: 0 none;
                        text-decoration: none;
                        text-transform: lowercase;
                    }
                    #logo a:hover {
                        border-bottom: 0 none;
                        text-decoration: none;
                    }
                    #logo .brkt {
                        color: #6699cc;
                    }
                    #logo .bang {
                        color: red;
                    }
                    #logo sup {
                        font-size: 60%;
                        margin-right: -3px;
                    }
                    #logo .domain {
                        color: #999999;
                    }
                    #welcometitle h1{
                        font-size: 64px;                        
                    }                    
                </style>
                <header id="logowrapper">
                    <h1 id="logo">
                        <a href="http://doctypehtml5.in">
                           <span class="brkt">&lt;</span><span class="bang">!</span><span itemprop="summary">DocType HTML<sup>5</sup></span><span class="domain">.in</span><span class="brkt">&gt;</span>
                        </a>
                    </h1>
                </header>
                <section class="middle" id="welcometitle">                    
                    <h1>Geolocation, Offline &amp;<br/> Mobile</h1>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide future">
                <style>                    
                    #speakerinfo h2 {
                        font-size: 36px;
                    }
                    #speakerinfo h3 {
                        font-size: 28px;
                    }
                    #speakerinfo .twitter {
                        display: inline-block;
                        background: url(images/twitter.png) no-repeat;                        
                        height: 39px;
                        padding-left: 53px;
                        padding-top: 7px;
                    }
                </style>
                <section class="middle" id="speakerinfo">
                    <h2>Dhaval Trivedi</h2>
                    <h3>UX Engineer, <a href="http://studiomarch.com">Studio March</a></h3>
                    <br/>
                    <h3><a class="twitter" href="http://twitter.com/dhavaltrivedi">@dhavaltrivedi</a></h3>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <style>
                    #intentionalblank {
                        font-size: 28px;
                    }
                </style>
                <section class="middle">
                    <h2 id="intentionalblank">This Page Intentionally Left Blank</h2>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <style>
                    #censor {
                        margin-top:5px;
                    }
                </style>
                <img id="censor" src="images/censor.png" alt="only for adults!" />
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <section class="middle">
                    <img src="images/location.png" alt="where am i?" />
                    <h1>Geolocation</h1>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>The Geolocation API...</h1>
                </header>
                <section>
                    <ul>
                        <li>High level interface to device implementation.</li>
                        <li>Agnostic of the underlying information sources.</li>
                        <li>Location inferred from GPS, WPS, Cell Tower Triangulation, IP Address, etc.</li>
                        <li>Location information is represented by latitude and longitude co-ordinates.</li>
                        <li>No guarantee! Accuracy depending availability of geo data.</li>
                        <li>Sharing your location is always opt-in. If you don’t want to, you don’t have to.
                            <br/><br/>Infobar:<br/>
                            <img src="images/geolocation_infobar.png" alt="geolocation prompt" />
                        </li>
                    </ul>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>...is supported by</h1>
                </header>
                <section class="middle">
                    <table>
                        <thead>
                            <tr>
                                <th>FireFox</th>
                                <th>Safari</th>
                                <th>Chrome</th>
                                <th>Opera</th>
                                <th>iPhone</th>
                                <th>Android</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>3.5+</td>
                                <td>5.0+</td>
                                <td>5.0+</td>
                                <td>10.6+</td>
                                <td>3.0+</td>
                                <td>2.0+</td>
                            </tr>
                        </tbody>
                    </table>                    
                </section>
                <span class="counter"></span>
            </div>
             <div class="slide far-future">
                <header>
                    <h1>The geolocation object</h1>
                </header>
                <section>
                    <ul>
                        <li>Geolocation API is published through <b>geolocation</b> child object within <b>navigator</b> object.</li>
                        <li>If the object exists, geolocation services are available. You can therefore:</li>
                    </ul>
                    <pre>
                        if (<b>navigator.geolocation</b>) {
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// geolocation is available. yay!</span>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// do stuff.</span>
                        } else {
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// bugger</span>
                        &nbsp;&nbsp;&nbsp;&nbsp;alert ('Geolocation services are not supported by your browser');
                        }
                    </pre>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Getting the location</h1>
                </header>
                <section>
                    <ul>
                        <li>navigator.geolocation.<b>getCurrentPosition()</b></li>
                        <li>"One shot"</li>
                    </ul>
                    <pre>
                        <span class="comments">// Three parameters - Success callback, an Optional Error callback, and an Optional PositionOptions Object.</span>
                        navigator.geolocation.<b>getCurrentPosition</b>(show_map, handle_error);

                        <span class="comments">// callback is called asynchronously</span>
                        <span class="comments">// with a Position object</span>
                        function <b>show_map</b>(position) {
                        &nbsp;&nbsp;&nbsp;&nbsp;var latitude = position.coords.latitude;
                        &nbsp;&nbsp;&nbsp;&nbsp;var longitude = position.coords.longitude;
                        &nbsp;&nbsp;&nbsp;&nbsp;var accuracy = position.coords.accuracy;
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// what are you waiting for?</span>
                        }

                        <span class="comments">// things gone awry. error callback will be called with PositionError object.</span>
                        function <b>handle_error</b>(err) {
                        &nbsp;&nbsp;&nbsp;&nbsp;if (err.code == 1) {
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// user said no!</span>
                        &nbsp;&nbsp;&nbsp;&nbsp;}
                        }                        
                    </pre>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h2>The Position Object</h2>                    
                </header>
                <section>
                    <ul>
                        <li>Has two properties - coords and timestamp.</li>                        
                    </ul>
                    <br/>
                    <table>
                        <thead>
                            <tr>
                                <th>Property</th>
                                <th>Type</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>coords.latitude</td>
                                <td>double</td>
                                <td>decimal degrees</td>
                            </tr>
                            <tr>
                                <td>coords.longitude</td>
                                <td>double</td>
                                <td>decimal degrees</td>
                            </tr>
                            <tr>
                                <td>coords.accuracy</td>
                                <td>double</td>
                                <td>meters</td>
                            </tr>
                            <tr>
                                <td>coords.altitude</td>
                                <td>double or null</td>
                                <td>meters</td>
                            </tr>
                            <tr>
                                <td>coords.altitudeAccuracy</td>
                                <td>double or null</td>
                                <td>meters</td>
                            </tr>
                            <tr>
                                <td>coords.heading</td>
                                <td>double or null</td>
                                <td>degrees</td>
                            </tr>
                            <tr>
                                <td>coords.speed</td>
                                <td>double or null</td>
                                <td>meters/second</td>
                            </tr>
                            <tr>
                                <td>timestamp</td>
                                <td>DOMTimeStamp</td>
                                <td>Date() object</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h2>The PositionError Object</h2>                    
                </header>
                <section>
                    <ul>
                        <li>Has two properties - code (enumerated error code) and message (for logging).</li>
                    </ul>
                    <br/>
                    <table>
                        <thead>
                            <tr>
                                <th>Error</th>
                                <th>Enumerated Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>PERMISSION_DENIED</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>POSITION_UNAVAILABLE</td>
                                <td>2</td>
                            </tr>
                            <tr>
                                <td>TIMEOUT</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td>UNKNOWN_ERROR</td>
                                <td>0</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h2>The PositionOptions Object...</h2>                    
                </header>
                <section>
                    <ul>
                        <li>Has three properties - enableHighAccuracy, timeout and maximumAge.</li>
                        <li>All are optional.</li>
                    </ul>
                    <br/>
                    <table>
                        <thead>
                            <tr>
                                <th>Property</th>
                                <th>Type</th>
                                <th>Default</th>
                                <th>Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>enableHighAccuracy</td>
                                <td>Boolean</td>
                                <td>false</td>
                                <td>true might be slower, may fail.</td>
                            </tr>
                            <tr>
                                <td>timeout</td>
                                <td>long</td>
                                <td>(no default)</td>
                                <td>milliseconds</td>
                            </tr>
                            <tr>
                                <td>maximumAge</td>
                                <td>long</td>
                                <td>0</td>
                                <td>milliseconds</td>
                            </tr>
                        </tbody>
                    </table>
                </section>                
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h2>...examples</h2>                    
                </header>
                <section>                    
                    <pre>
                        <span class="comments">// Cache a position for 75 seconds</span>
                        navigator.geolocation.getCurrentPosition(show_map, handle_error, <b>{maximumAge:75000}</b>);
                        
                        <span class="comments">// Force to use GPS if available</span>
                        navigator.geolocation.getCurrentPosition(show_map, handle_error, <b>{enableHighAccuracy: true}</b>);
                        
                        <span class="comments">// Fall back to a previously cached position</span>
                        navigator.geolocation.getCurrentPosition(show_map, handle_error, <b>{maximumAge:Infinity, timeout:0, enableHighAccuracy: true}</b>);
                    </pre>
                </section>                
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Watching the current location</h1>
                </header>
                <section>
                    <ul>
                        <li>navigator.geolocation.<b>watchPosition()</b></li>
                        <li>"Requests repeated position updates"</li>
                        <li>Same as <b>getCurrentPosition()</b> - the callback is called every time the position is updated.</li>
                        <li>Get a handle to watchPosition, and use clearWatch(handle) to stop getting the updates. Just like <b>setInterval()</b> and <b>clearInterval()</b></li>
                    </ul>
                    <br/>
                    <pre>
                        <span class="comments">// Simple, eh?</span>
                        var watchId = navigator.geolocation.<b>watchPosition</b>(update_map, handle_error);

                        <span class="comments">// On clicking some button, we want all this to stop.</span>
                        function someButtonClickHandler() {
                        &nbsp;&nbsp;&nbsp;&nbsp;navigator.geolocation.<b>clearWatch</b>(watchId);
                        }
                    </pre>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <style>
                    #map_demo {
                        width:100%;
                        height:480px;
                    }
                </style>
                <header>
                    <h1>Demo</h1>
                </header>                
                <section>
                    <button id="whereami">Where am I?</button>
                    <br/><br/>
                    <div id="map_demo"></div>
                </section>
                <script>
                    /*var cloudmade = new CM.Tiles.CloudMade.Web({key: 'BC9A493B41014CAABB98F0471D759707',styleId: 15801});
	                var map_demo = new CM.Map('map_demo', cloudmade);
	                map_demo.disableScrollWheelZoom();
	                map_demo.addControl(new CM.LargeMapControl());
	                map_demo.addControl(new CM.ScaleControl());
	                var meIcon = new CM.Icon();
	                meIcon.image = "images/icon_me.png";
	                meIcon.iconSize = new CM.Size(28, 47);
	                meIcon.iconAnchor = new CM.Point(14, 47);
	                var currentLatLng = new CM.LatLng(0,0);
		            map_demo.setCenter(currentLatLng,1);
		            document.getElementById('whereami').addEventListener('click', function(){
		                if (navigator.geolocation) {		                    
		                    navigator.geolocation.getCurrentPosition(show_map);
		                }
		                function show_map(position){
		                    alert('test');
    		                currentLatLng = new CM.LatLng(position.coords.latitude, position.coords.longitude);
    		                map_demo.setCenter(currentLatLng,15);
		                }
		            });*/
                </script>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Unsupported platforms?</h1>
                </header>
                <section>
                    <ul>
                        <li>Google Gears - almost the same as geolocation API.</li>
                        <li>Many older mobile platforms have device specific geolocation APIs - e.g. BlackBerry, Nokia, Palm, etc.</li>
                    </ul>
                    <h2>Let there be geolocation! geo.js!</h2>
                    <ul>
                        <li><a href="http://code.google.com/p/geo-location-javascript/">http://code.google.com/p/geo-location-javascript/</a></li>
                        <li>Open source, MIT-licensed library.</li>
                        <li>Still need to include <b>gears_init.js</b></li>
                        <li>Normalizes API differences across different platforms.</li>
                        <li>Doesn't support <b>watchPosition()</b> yet, so <b>getCurrentPosition()</b> has to be polled continuously.</li>
                    </ul>
                </section>
                <span class="counter"></span>
            </div>-->
           <!--<div class="slide current">
                <section class="middle">
                    <img src="images/offline.png" alt="Offline Storage FTW!" />
                    <h1>Offline</h1>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide future">
                <header>
                    <h1>Cookies</h1>
                </header>
                <section>
                    <ul>
                        <li>...suck!</li>
                        <li>4 KB? What?</li>
                        <li>Hard to code.</li>
                        <li>Cookies leaks.</li>
                        <li>Cookies are immortal.</li>
                    </ul>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Web Storage</h1>
                </header>
                <section>
                    <ul>
                        <li>A simple key/value pair storage.</li>
                        <li>One API, easy to remember.</li>
                    </ul>
                    <pre>
                        <span class="comments">// To set a key-value</span>
                        <b>setItem</b>(key, value);
                        <span class="comments">// even better</span>
                        <b>localStorage</b>[key] = value;
                        
                        <span class="comments">// To get a value</span>
                        string* <b>getItem</b>(key);
                        <span class="comments">// moar better</span>
                        var someInt = parseInt(<b>localStorage</b>[key]);

                        <span class="comments">// Remove a value</span>
                        <b>removeItem</b>(key);
                        
                        <span class="comments">// Get a key</span>
                        string <b>key</b>(index);
                        
                        <span class="comments">// Clears the entire storage</span>
                        <b>clear()</b>;
                        
                        <span class="comments">// Count</span>
                        <b>.length</b>;
                    </pre>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Two Instances</h1>
                </header>
                <section>
                    <h2>localStorage</h2>
                    <ul>
                        <li>Persists until you or user explicitly clears.</li>
                        <li>Applied to document origin - scheme/host/port tuple.</li>
                        <li>No expiry.</li>
                    </ul>
                    <h2>sessionStorage</h2>
                    <ul>
                        <li>Lasts while on document origin.</li>
                        <li>There ain't no leaks.</li>
                        <li>Otherwise, the same as <b>localStorage</b>.</li>
                    </ul>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Two things</h1>
                </header>
                <section>                    
                    <ul>
                        <li>Values are strings.</li>
                        <li>To store complex objects, use JSONs.</li>                        
                    </ul>                    
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Inspecting</h1>
                </header>
                <section class="middle">
                    <img src="images/localstorageshot.png" alt="Local Storage" />
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Browser Support</h1>
                </header>
                <section class="middle">
                    <table>
                        <thead>
                            <tr>
                                <th>IE</th>
                                <th>FireFox</th>
                                <th>Safari</th>
                                <th>Chrome</th>
                                <th>Opera</th>
                                <th>iPhone</th>
                                <th>Android</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>8.0+</td>
                                <td>3.5+</td>
                                <td>4.0+</td>
                                <td>4.0+</td>
                                <td>10.5+</td>
                                <td>2.0+</td>
                                <td>2.0+</td>
                            </tr>
                        </tbody>
                    </table>
                    
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>For unsupported browsers</h1>
                </header>
                <section>
                    <h2>Detecting</h2>
                    <ul>
                        <li>Use <a href="http://www.modernizr.com/">Modernizr</a></li>                        
                    </ul>
                    <pre>
                        if (<b>Modernizr.localstorage</b>) {
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// window.localStorage is available!</span>
                        } else {
                          &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// no native support for HTML5 storage :(</span>
                          &nbsp;&nbsp;&nbsp;&nbsp;<span class="comments">// maybe try dojox.storage or a third-party solution</span>
                        }                      
                    </pre>
                    <br/>
                    <h2>Not supported?</h2>
                    <ul>
                        <li>window.name hack by Remy Sharp (twitter:<a href="http://twitter.com/rem">@rem</a>)</li>
                        <li>Thanks Remy, for everything!</li>
                        <li><a href="http://gist.github.com/350433">http://gist.github.com/350433</a></li>
                    </ul>
                </section>
                <span class="counter"></span>
            </div>
            <div class="slide far-future">
                <header>
                    <h1>Alternatives</h1>
                </header>
                <section>
                    <h2>Web SQL Database</h2>
                    <ul>
                        <li>Opera, Chrome, Safari, Mobile Safari. Firefox - never!</li>                        
                    </ul>
                    <pre>
                        <span class="comments">// Sample code</span>
                        openDatabase('documents', '1.0', 'Local document storage', 5*1024*1024, function (db) {
                        &nbsp;&nbsp;&nbsp;&nbsp;db.changeVersion('', '1.0', function (t) {
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.executeSql('CREATE TABLE docids (id, name)');
                        &nbsp;&nbsp;&nbsp;&nbsp;}, error);
                        });
                    </pre>
                    <br/>
                    <h2>IndexedDB</h2>
                    <ul>
                        <li>Object Store - No SQL</li>
                        <li>FireFox4 Beta only :(</li>
                    </ul>
                </section>
                <span class="counter"></span>
            </div>-->
            <div class="slide current">
                <style>                    
                </style>
                <section class="middle">
                    <img src="images/iphone.png" alt="Mobile" />
                    <h1>Mobile</h1>
                </section>
                <span class="counter"></span>
            </div>
            <!--<div class="slide far-future">
                <section class="middle">
                    <h1>Thank You.</h1>
                </section>
                <span class="counter"></span>
            </div>-->
        </div> <!-- end of .slides -->
    </div> <!-- end of .presentation -->

    <!-- Grab Google CDN's jQuery. fall back to local if necessary -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script>!window.jQuery && document.write('<script src="js/jquery-1.4.2.min.js"><\/script>')</script>
    <script src="js/jquery.easing.1.3.js"></script>

    <script src="js/plugins.js?v=1"></script>
    <script src="js/script.js?v=1"></script>

    <!--[if lt IE 7 ]>
      <script src="js/dd_belatedpng.js?v=1"></script>
    <![endif]--> 

</body>
</html>